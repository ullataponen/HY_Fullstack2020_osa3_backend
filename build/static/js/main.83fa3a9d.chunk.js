(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),u=t.n(c),o=t(2),s=function(e){return r.a.createElement("li",null,e.person.name," ",e.person.number," ",r.a.createElement("button",{onClick:function(){return n=e.person.id,void e.deletePerson(n);var n}},"delete"))},l=t(3),i=t.n(l),m="/api/persons",d={getAll:function(){return i.a.get(m).then((function(e){return e.data}))},create:function(e){return i.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},del:function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},f=function(e){var n=e.persons,t=e.keyword,a=e.setPersons,c=e.setMessage,u=function(e){var t=n.find((function(n){return n.id===e}));window.confirm("Are you sure to delete ".concat(t.name,"?"))&&d.del(e).then((function(e){d.getAll().then((function(e){a(e),c("Person '".concat(t.name,"' was successfully deleted."))}))})).catch((function(e){c("Error. Person '".concat(t.name,"' was already removed from server"))})),setTimeout((function(){c("")}),5e3)};return""===t?n.map((function(e){return r.a.createElement(s,{person:e,key:e.id,deletePerson:u})})):n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return r.a.createElement(s,{person:e,key:e.id,deletePerson:u})}))},p=t(4),v=t(15);function E(e){var n=e.persons,t=e.savePerson,c=e.setPersons,u=e.setMessage,s=Object(a.useState)({name:"",number:""}),l=Object(o.a)(s,2),i=l[0],m=l[1],f=function(e){m(Object(v.a)({},i,Object(p.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Add new entry"),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var a=n.find((function(e){return e.name===i.name}));if(console.log(a),n.find((function(e){return e.name===i.name}))){var r=a.id;window.confirm("".concat(i.name," is already added to phonebook, replace the old number with new one?"))&&(d.update(r,i).then((function(e){u("Person '".concat(a.name,"' was successfully updated.")),c(n.map((function(n){return n.id!==r?n:e})))})).catch((function(e){u("Error. Person '".concat(a.name,"' was already removed from server"))})),setTimeout((function(){u("")}),5e3),c(n.filter((function(e){return e.id!==r}))))}else d.create(i).then((function(e){t(e),u("Person '".concat(i.name,"' was successfully added.")),setTimeout((function(){u("")}),5e3)}));m({name:"",number:""})}(e)}},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{name:"name",value:i.name,onChange:function(e){return f(e)}})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{name:"number",value:i.number,onChange:function(e){return f(e)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))}var b=function(e){var n=e.message;return n.includes("Error")?r.a.createElement("div",{className:"error"},n):n.includes("successfully")?r.a.createElement("div",{className:"success"},n):null},h=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(o.a)(u,2),l=s[0],i=s[1],m=Object(a.useState)(""),p=Object(o.a)(m,2),v=p[0],h=p[1];Object(a.useEffect)((function(){d.getAll().then((function(e){c(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(b,{message:v}),"Filter contacts with: ",r.a.createElement("input",{value:l,onChange:function(e){i(e.target.value)}}),r.a.createElement(E,{persons:t,savePerson:function(e){c(t.concat(e))},setPersons:c,setMessage:h}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{persons:t,keyword:l,setPersons:c,setMessage:h}))};t(38);u.a.render(r.a.createElement(h,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.83fa3a9d.chunk.js.map